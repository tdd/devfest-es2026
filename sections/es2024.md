---
layout: cover
background: /covers/kira-auf-der-heide-v7jlNFuKF14-unsplash.jpg
---

# ES2024

Une belle édition, beaucoup de choses…

---

# ES2024 : Array grouping 🎉

Encore un clou dans le cercueil de Lodash.

```js
const thisSlot = [
  { title: 'Server side WASM', mainTag: 'Languages' },
  { title: 'Réduire l’empreinte environnementale', mainTag: 'Discovery' },
  { title: 'Quoi de neuf dans ES2026 ?', mainTag: 'Languages' },
  { title: 'Dynamisez vos backends avec HTMX', mainTag: 'Discovery' },
  // …
]
schedule.group(({ mainTag }) => mainTag)
// {
//   Discovery: [{ title: 'Réduire l’empreinte…'… }, { title: 'Dynamisez vos backends…'… }],
//   Languages: [{ title: 'Server side WASM'… }, { title: 'Quoi de neuf dans ES2026 ?'… }],
//   ...
// }

schedule.groupToMap(({ mainTag }) => mainTag)
// => Pareil, **mais sous forme de Map** (donc on peut grouper sur n’importe quel type de clé !)
```

---

# ES2024 : drapeau `v` sur les regex

Permet des **classes imbriquées** (une classe liste les possibilités pour un caractère), ce qui ouvre la porte aux **différences** et **intersections** de classes. Super cool.

Utilise le drapeau `v` au lieu du drapeau Unicode d’ES2015 (`u`) quand tu as besoin de ça.

```js
// Tous les chiffres décimaux d’Unicode, sauf ceux ASCII
text.match(/[\p{Decimal_Number}--[0-9]]/gv)

// Ou sinon :
text.match(/[\p{Decimal_Number}--\p{ASCII}]/gv)

// Toutes les lettres Khmer (= script Khmer + propriété Letter)
text.match(/[\p{Script=Khmer}&&\p{Letter}]/gv)
```

---

# ES2024 : `Promise.withResolvers()`

On avait l'habitude de faire ça à la main quand on voulait pouvoir manipuler le résultat d'une promesse hors de la fonction de rappel du constructeur `Promise`.  Du coup c'est sympa de ne pas avoir besoin de jongler avec les portées, ou lorsqu'on s'appuie sur des API événementielles pour notre traitement asynchrone.

```js
const { promise, resolve, reject } = Promise.withResolvers()
```

⚠️ **N'expose pas ces méthodes au code qui t'appelle !** Elles ne sont là que pour simplifier ton implémentation, pas pour casser l'encapsulation !

---

# Le reste d’ES2024

C'est plutôt du bas niveau à destination des implémenteur·ses de bibliothèques velues :

- `ArrayBuffer#resize(…)`
- `ArrayBuffer#transfer(…)`
- `Atomics.waitAsync(…)`
- `String#isWellFormed()`
- `String#toWellFormed()`

Je t'en fais grâce…